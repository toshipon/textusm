# 開発進捗 (2025-04-05)

## 仮説キャンバス機能 (VS Code 拡張機能)

### 実装済み

*   **設定項目:**
    *   `package.json` に Gemini, Claude, OpenAI の API キーを設定するための項目 (`textusm.hypothesisCanvas.*ApiKey`) を追加。
*   **チャットインターフェース:**
    *   `TextUSM: Open Hypothesis Canvas Chat` コマンド (`textusm.hypothesisCanvas.showChat`) を追加。
    *   基本的な Webview パネル (`HypothesisCanvasChatPanel`) を作成し、コマンド実行時に表示されるようにした。
    *   VS Code UI Toolkit を導入し、基本的なチャット UI (メッセージ表示エリア、入力エリア、送信ボタン) を実装。
    *   Enter キーでのメッセージ送信に対応。
*   **LLM 連携 (Gemini):**
    *   `@google/generative-ai` ライブラリをインストール。
    *   設定から Gemini API キーを取得する処理を追加。
    *   チャットで送信されたメッセージを Gemini API (`gemini-1.5-flash`) に送信し、応答を表示する基本機能を実装。
    *   API キー未設定時や API エラー発生時の基本的なエラーハンドリングを追加。
    *   API 呼び出し中のローディング表示を追加。

### 未実装・今後のタスク

*   **LLM 選択:**
    *   チャット UI または設定で、使用する LLM (Gemini, Claude, OpenAI, Copilot) を選択できるようにする。
    *   選択された LLM に応じて API キーを使用し、対応するクライアントライブラリを呼び出す処理。
*   **マークダウン連携:**
    *   チャットの会話内容（特に LLM の提案）を、関連する仮説キャンバスのマークダウンファイルに反映させる機能。
    *   どのファイル/セクションを更新するかを特定する仕組み。
*   **プレビュー連携:**
    *   チャット内から、関連するマークダウンファイルのプレビューを開くためのリンクまたはボタン。
*   **他 LLM サポート:**
    *   Claude, OpenAI API との連携実装。
    *   GitHub Copilot Chat API (利用可能であれば) または代替手段の調査・実装。
*   **プロンプト改善:**
    *   仮説キャンバス作成支援に特化した、より効果的なプロンプトエンジニアリング。
    *   会話履歴や現在のキャンバス内容をコンテキストとして活用する。
*   **UI/UX 改善:**
    *   メッセージ表示の改善 (コードブロック、リストなど)。
    *   エラー表示の改善。
*   **テスト:**
    *   各機能の単体テストおよび結合テスト。